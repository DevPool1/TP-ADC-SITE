"use strict";(globalThis.webpackChunktp_adc_site=globalThis.webpackChunktp_adc_site||[]).push([[6504],{521:e=>{e.exports=JSON.parse('{"permalink":"/TP-ADC-SITE/blog/tech-stack-nutriapp","editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/blog/2025-12-12-tech-stack.md","source":"@site/blog/2025-12-12-tech-stack.md","title":"\ud83e\udd51 Arquitetura do NutriApp: Python Console com SQLite","description":"Como constru\xedmos uma aplica\xe7\xe3o console robusta para gest\xe3o nutricional usando Python 3.10+, SQLite3 e padr\xf5es de arquitetura limpa. Este post detalha as decis\xf5es t\xe9cnicas por tr\xe1s do NutriApp.","date":"2025-12-12T00:00:00.000Z","tags":[{"inline":true,"label":"python","permalink":"/TP-ADC-SITE/blog/tags/python"},{"inline":true,"label":"sqlite","permalink":"/TP-ADC-SITE/blog/tags/sqlite"},{"inline":false,"label":"Arquitetura","permalink":"/TP-ADC-SITE/blog/tags/arquitetura","description":"Decis\xf5es de arquitetura e design de sistema"},{"inline":false,"label":"Desenvolvimento","permalink":"/TP-ADC-SITE/blog/tags/desenvolvimento","description":"Processo de desenvolvimento e boas pr\xe1ticas"}],"readingTime":9.71,"hasTruncateMarker":true,"authors":[{"name":"Alexandru Tutunaru","title":"Tech Lead & Arquiteto","url":"https://github.com/ATutunaru","imageURL":"https://github.com/ATutunaru.png","key":"alexandru","page":null}],"frontMatter":{"slug":"tech-stack-nutriapp","title":"\ud83e\udd51 Arquitetura do NutriApp: Python Console com SQLite","authors":["alexandru"],"tags":["python","sqlite","arquitetura","desenvolvimento"],"date":"2025-12-12T00:00:00.000Z"},"unlisted":false,"nextItem":{"title":"\ud83d\udd10 Seguran\xe7a: Fazemos Hash de Passwords, n\xe3o de Batatas","permalink":"/TP-ADC-SITE/blog/seguranca-passwords-hash"}}')},5993:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>t,default:()=>u,frontMatter:()=>r,metadata:()=>a,toc:()=>d});var a=s(521),i=s(4848),o=s(8453);const r={slug:"tech-stack-nutriapp",title:"\ud83e\udd51 Arquitetura do NutriApp: Python Console com SQLite",authors:["alexandru"],tags:["python","sqlite","arquitetura","desenvolvimento"],date:new Date("2025-12-12T00:00:00.000Z")},t=void 0,l={authorsImageUrls:[void 0]},d=[{value:"\ufffd\ufe0f Arquitetura MVC em Python",id:"\ufe0f-arquitetura-mvc-em-python",level:2},{value:"\ufffd Por Que Python 3.10+?",id:"-por-que-python-310",level:2},{value:"Python vs Outras Linguagens",id:"python-vs-outras-linguagens",level:3},{value:"Match/Case: A Funcionalidade Killer do Python 3.10",id:"matchcase-a-funcionalidade-killer-do-python-310",level:3},{value:"SQLite Nativo: Zero Depend\xeancias",id:"sqlite-nativo-zero-depend\xeancias",level:3},{value:"\ud83d\uddc2\ufe0f M\xf3dulos CRUD: Separa\xe7\xe3o de Responsabilidades",id:"\ufe0f-m\xf3dulos-crud-separa\xe7\xe3o-de-responsabilidades",level:2},{value:"Organiza\xe7\xe3o do C\xf3digo",id:"organiza\xe7\xe3o-do-c\xf3digo",level:3},{value:"Exemplo: CRUD de Alimentos",id:"exemplo-crud-de-alimentos",level:3},{value:"Classes OOP: User e Admin",id:"classes-oop-user-e-admin",level:3},{value:"\ud83d\uddc4\ufe0f Esquema da Base de Dados SQLite",id:"\ufe0f-esquema-da-base-de-dados-sqlite",level:2},{value:"Modelo Relacional",id:"modelo-relacional",level:3},{value:"Query Complexa: Calorias Totais por Refei\xe7\xe3o",id:"query-complexa-calorias-totais-por-refei\xe7\xe3o",level:3},{value:"\ud83d\udd10 Autentica\xe7\xe3o Segura com hashlib",id:"-autentica\xe7\xe3o-segura-com-hashlib",level:2},{value:"Fluxo de Login",id:"fluxo-de-login",level:3},{value:"Hashing de Passwords",id:"hashing-de-passwords",level:3},{value:"\ufffd Sistema de Logging com M\xf3dulo Nativo",id:"-sistema-de-logging-com-m\xf3dulo-nativo",level:2},{value:"Por Que Logging?",id:"por-que-logging",level:3},{value:"Configura\xe7\xe3o Centralizada",id:"configura\xe7\xe3o-centralizada",level:3},{value:"Uso no C\xf3digo",id:"uso-no-c\xf3digo",level:3},{value:"\ufffd Funcionalidades Avan\xe7adas",id:"-funcionalidades-avan\xe7adas",level:2},{value:"1. Opera\xe7\xf5es em Lote (Admin)",id:"1-opera\xe7\xf5es-em-lote-admin",level:3},{value:"2. Agrupamento de Refei\xe7\xf5es por Data",id:"2-agrupamento-de-refei\xe7\xf5es-por-data",level:3},{value:"3. C\xe1lculo Autom\xe1tico de IMC",id:"3-c\xe1lculo-autom\xe1tico-de-imc",level:3},{value:"\ud83d\udca1 Li\xe7\xf5es Aprendidas",id:"-li\xe7\xf5es-aprendidas",level:2},{value:"1. Match/Case \xe9 Game Changer",id:"1-matchcase-\xe9-game-changer",level:3},{value:"2. Context Managers Previnem Leaks",id:"2-context-managers-previnem-leaks",level:3},{value:"3. Docstrings S\xe3o Documenta\xe7\xe3o Viva",id:"3-docstrings-s\xe3o-documenta\xe7\xe3o-viva",level:3},{value:"\ud83d\udd2e Roadmap: De Console para Web",id:"-roadmap-de-console-para-web",level:2},{value:"Fase 1: API REST (Em Progresso)",id:"fase-1-api-rest-em-progresso",level:3},{value:"Fase 2: Frontend React",id:"fase-2-frontend-react",level:3},{value:"Fase 3: Features Avan\xe7adas",id:"fase-3-features-avan\xe7adas",level:3},{value:"\ud83c\udf93 Recursos para Aprender",id:"-recursos-para-aprender",level:2},{value:"\ud83d\udcc8 Estat\xedsticas do Projeto",id:"-estat\xedsticas-do-projeto",level:2},{value:"\ud83e\udd1d Conclus\xe3o",id:"-conclus\xe3o",level:2},{value:"Principais Takeaways",id:"principais-takeaways",level:3},{value:"Reposit\xf3rio do C\xf3digo",id:"reposit\xf3rio-do-c\xf3digo",level:3}];function c(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h2:"h2",h3:"h3",hr:"hr",img:"img",input:"input",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["Como constru\xedmos uma aplica\xe7\xe3o console robusta para gest\xe3o nutricional usando Python 3.10+, SQLite3 e padr\xf5es de arquitetura limpa. Este post detalha as decis\xf5es t\xe9cnicas por tr\xe1s do ",(0,i.jsx)(n.strong,{children:"NutriApp"}),"."]}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-arquitetura-mvc-em-python",children:"\ufffd\ufe0f Arquitetura MVC em Python"}),"\n",(0,i.jsxs)(n.p,{children:["O NutriApp segue o padr\xe3o ",(0,i.jsx)(n.strong,{children:"Model-View-Controller"}),", separando l\xf3gica de neg\xf3cio, apresenta\xe7\xe3o e controlo numa aplica\xe7\xe3o console."]}),"\n",(0,i.jsx)(n.mermaid,{value:"graph TB\n    subgraph View\n        A[menus.py] --\x3e B[Terminal UI]\n    end\n    \n    subgraph Controller\n        C[main.py] --\x3e D[Flow Control]\n        D --\x3e E[Match/Case Python 3.10+]\n    end\n    \n    subgraph Model\n        F[user.py / admin.py] --\x3e G[Business Logic]\n        H[crud_*.py] --\x3e I[Database Operations]\n        J[database.py] --\x3e K[SQLite Connection]\n    end\n    \n    subgraph Infrastructure\n        L[logging_config.py] --\x3e M[File Logging]\n        N[utils.py] --\x3e O[Helper Functions]\n    end\n    \n    B --\x3e D\n    D --\x3e G\n    D --\x3e I\n    I --\x3e K\n    M --\x3e D\n    O --\x3e D\n    \n    style A fill:#3776ab\n    style C fill:#ffd343\n    style F fill:#68a063\n    style J fill:#003b57"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Separa\xe7\xe3o de Responsabilidades:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"View"})," (menus.py): Apenas imprime e pede input"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Controller"})," (main.py): Orquestra a aplica\xe7\xe3o com ",(0,i.jsx)(n.code,{children:"match/case"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Model"})," (classes + CRUD): L\xf3gica de neg\xf3cio e acesso a dados"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-por-que-python-310",children:"\ufffd Por Que Python 3.10+?"}),"\n",(0,i.jsx)(n.h3,{id:"python-vs-outras-linguagens",children:"Python vs Outras Linguagens"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Veredito:"})," Python \xe9 perfeito para aplica\xe7\xf5es onde produtividade > performance bruta."]}),"\n",(0,i.jsx)(n.h3,{id:"matchcase-a-funcionalidade-killer-do-python-310",children:"Match/Case: A Funcionalidade Killer do Python 3.10"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# \u274c Python 3.9: if/elif cascata\nchoice = input(\"Escolha: \")\nif choice == '1':\n    registar_refeicao()\nelif choice == '2':\n    ver_diario()\nelif choice == '3':\n    editar_registo()\n# ... 10 op\xe7\xf5es depois ...\n\n# \u2705 Python 3.10+: match/case limpo\nmatch choice:\n    case '1': registar_refeicao()\n    case '2': ver_diario()\n    case '3': editar_registo()\n    case '0': logout()\n    case _: print(\"Op\xe7\xe3o inv\xe1lida\")\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Benef\xedcio Real",type:"tip",children:(0,i.jsxs)(n.p,{children:["O ",(0,i.jsx)(n.code,{children:"match/case"})," tornou o ",(0,i.jsx)(n.a,{href:"https://github.com/DevPool1/ADC_TP_NUTRICAO/blob/main/src/main.py",children:"main.py"})," ",(0,i.jsx)(n.strong,{children:"40% mais leg\xedvel"})," comparado com if/elif!"]})}),"\n",(0,i.jsx)(n.h3,{id:"sqlite-nativo-zero-depend\xeancias",children:"SQLite Nativo: Zero Depend\xeancias"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'import sqlite3  # Nativo! Sem pip install\n\n# Context manager autom\xe1tico\nwith get_db_connection() as conn:\n    cursor = conn.cursor()\n    cursor.execute("SELECT * FROM users WHERE username = ?", (username,))\n    return cursor.fetchone()\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Por que SQLite vs PostgreSQL/MySQL?"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\u2705 Zero configura\xe7\xe3o (ficheiro ",(0,i.jsx)(n.code,{children:"data/nutricao.db"}),")"]}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Transa\xe7\xf5es ACID completas"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Perfeito para ~100k registos"}),"\n",(0,i.jsx)(n.li,{children:"\u2705 Cross-platform (funciona em Windows/Linux/Mac)"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-m\xf3dulos-crud-separa\xe7\xe3o-de-responsabilidades",children:"\ud83d\uddc2\ufe0f M\xf3dulos CRUD: Separa\xe7\xe3o de Responsabilidades"}),"\n",(0,i.jsx)(n.h3,{id:"organiza\xe7\xe3o-do-c\xf3digo",children:"Organiza\xe7\xe3o do C\xf3digo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"src/\n\u251c\u2500\u2500 main.py              # Controller: Orquestra tudo\n\u251c\u2500\u2500 menus.py             # View: UI em terminal\n\u251c\u2500\u2500 user.py / admin.py   # Model: Classes de dom\xednio\n\u251c\u2500\u2500 crud_login.py        # CRUD: Gest\xe3o de utilizadores\n\u251c\u2500\u2500 crud_alimentos.py    # CRUD: Gest\xe3o de alimentos\n\u251c\u2500\u2500 crud_registos.py     # CRUD: Di\xe1rio de refei\xe7\xf5es\n\u251c\u2500\u2500 database.py          # Conex\xe3o SQLite\n\u251c\u2500\u2500 logging_config.py    # Sistema de logging\n\u2514\u2500\u2500 utils.py             # Fun\xe7\xf5es auxiliares\n"})}),"\n",(0,i.jsx)(n.h3,{id:"exemplo-crud-de-alimentos",children:"Exemplo: CRUD de Alimentos"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# crud_alimentos.py\ndef create_alimento(nome, calorias, proteinas, hidratos, gorduras):\n    """Cria um novo alimento na base de dados."""\n    sql = """INSERT INTO alimentos(nome, calorias, proteinas, hidratos, gorduras) \n             VALUES (?, ?, ?, ?, ?)"""\n    try:\n        with get_db_connection() as conn:\n            cursor = conn.cursor()\n            cursor.execute(sql, (nome, calorias, proteinas, hidratos, gorduras))\n            conn.commit()\n            return cursor.lastrowid\n    except sqlite3.IntegrityError:\n        print(f"Erro: Alimento \'{nome}\' j\xe1 existe.")\n        return None\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Boa Pr\xe1tica",type:"info",children:(0,i.jsxs)(n.p,{children:["Cada m\xf3dulo ",(0,i.jsx)(n.code,{children:"crud_*.py"})," cont\xe9m ",(0,i.jsx)(n.strong,{children:"apenas opera\xe7\xf5es de base de dados"}),". Zero l\xf3gica de UI!"]})}),"\n",(0,i.jsx)(n.h3,{id:"classes-oop-user-e-admin",children:"Classes OOP: User e Admin"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# user.py\nclass User:\n    def __init__(self, username, peso_kg, altura_cm, objetivo_calorias):\n        self.username = username\n        self.peso_kg = peso_kg\n        self.altura_cm = altura_cm\n        self.objetivo_calorias = objetivo_calorias\n    \n    @property\n    def imc(self):\n        """Calcula IMC automaticamente."""\n        if self.peso_kg and self.altura_cm:\n            altura_m = self.altura_cm / 100\n            return round(self.peso_kg / (altura_m ** 2), 1)\n        return None\n    \n    def categoria_imc(self):\n        """Retorna categoria do IMC."""\n        if not self.imc:\n            return "Dados insuficientes"\n        if self.imc < 18.5:\n            return "Abaixo do Peso"\n        elif self.imc < 25:\n            return "Peso Normal"\n        # ... mais categorias\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# admin.py\nclass Admin(User):\n    """Heran\xe7a! Admin \xe9 um User com superpoderes."""\n    \n    @staticmethod\n    def listar_utilizadores():\n        """M\xe9todo exclusivo de admin."""\n        sql = "SELECT username, role FROM users ORDER BY username"\n        with get_db_connection() as conn:\n            cursor = conn.cursor()\n            cursor.execute(sql)\n            return cursor.fetchall()\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"\ufe0f-esquema-da-base-de-dados-sqlite",children:"\ud83d\uddc4\ufe0f Esquema da Base de Dados SQLite"}),"\n",(0,i.jsx)(n.h3,{id:"modelo-relacional",children:"Modelo Relacional"}),"\n",(0,i.jsx)(n.mermaid,{value:"erDiagram\n    USERS ||--o{ REGISTOS_DIARIOS : cria\n    ALIMENTOS ||--o{ REGISTOS_DIARIOS : contem\n    \n    USERS {\n        int user_id PK\n        string username UK\n        string password_hash\n        float peso_kg\n        int altura_cm\n        int objetivo_calorias\n        string role\n    }\n    \n    ALIMENTOS {\n        int alimento_id PK\n        string nome UK\n        int calorias\n        float proteinas\n        float hidratos\n        float gorduras\n    }\n    \n    REGISTOS_DIARIOS {\n        int registo_id PK\n        int user_id FK\n        int alimento_id FK\n        string data_registo\n        float quantidade_gramas\n        string tipo_refeicao\n    }"}),"\n",(0,i.jsx)(n.h3,{id:"query-complexa-calorias-totais-por-refei\xe7\xe3o",children:"Query Complexa: Calorias Totais por Refei\xe7\xe3o"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# crud_registos.py\ndef get_registos_by_user(user_id, data_str=None):\n    """Obt\xe9m registos com JOIN para calcular calorias."""\n    sql = """\n    SELECT \n        r.registo_id,\n        r.data_registo,\n        r.tipo_refeicao,\n        r.quantidade_gramas,\n        a.nome as alimento_nome,\n        a.calorias,\n        a.proteinas,\n        (a.calorias * r.quantidade_gramas / 100.0) as calorias_total,\n        (a.proteinas * r.quantidade_gramas / 100.0) as proteinas_total\n    FROM registos_diarios r\n    JOIN alimentos a ON r.alimento_id = a.alimento_id\n    WHERE r.user_id = ?\n    ORDER BY r.data_registo DESC\n    """\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Performance",type:"tip",children:(0,i.jsxs)(n.p,{children:["O SQLite usa ",(0,i.jsx)(n.strong,{children:"row_factory = sqlite3.Row"})," para retornar dicion\xe1rios em vez de tuplas!"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-autentica\xe7\xe3o-segura-com-hashlib",children:"\ud83d\udd10 Autentica\xe7\xe3o Segura com hashlib"}),"\n",(0,i.jsx)(n.h3,{id:"fluxo-de-login",children:"Fluxo de Login"}),"\n",(0,i.jsx)(n.mermaid,{value:'sequenceDiagram\n    autonumber\n    participant U as User\n    participant M as main.py\n    participant C as crud_login.py\n    participant DB as SQLite\n    participant H as utils.py\n    \n    U->>M: Input username + password\n    M->>C: login(username, password)\n    C->>DB: SELECT * WHERE username = ?\n    DB--\x3e>C: {user_id, username, password_hash}\n    C->>H: check_password(hash, password)\n    H->>H: hashlib.sha256(password)\n    \n    alt Password V\xe1lida\n        H--\x3e>C: True\n        C--\x3e>M: user_record\n        M->>M: user_logado = user_record\n        M--\x3e>U: Redireciona para menu_logado()\n    else Password Inv\xe1lida (3 tentativas)\n        H--\x3e>C: False\n        C--\x3e>M: None\n        M--\x3e>U: "Login falhou"\n    end'}),"\n",(0,i.jsx)(n.h3,{id:"hashing-de-passwords",children:"Hashing de Passwords"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# utils.py\nimport hashlib\n\ndef hash_password(password_plain: str) -> str:\n    """Gera hash SHA-256 da password."""\n    return hashlib.sha256(password_plain.encode(\'utf-8\')).hexdigest()\n\ndef check_password(stored_hash: str, password_plain: str) -> bool:\n    """Verifica se a password corresponde ao hash."""\n    return stored_hash == hash_password(password_plain)\n'})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# crud_login.py\ndef login(username, password_plain):\n    """Login com 3 tentativas para a password."""\n    sql = "SELECT * FROM users WHERE username = ?"\n    \n    with get_db_connection() as conn:\n        cursor = conn.cursor()\n        cursor.execute(sql, (username,))\n        user_record = cursor.fetchone()\n        \n        if not user_record:\n            print("Utilizador n\xe3o encontrado")\n            return None\n        \n        # Sistema de 3 tentativas\n        tentativas = 0\n        while tentativas < 3:\n            if check_password(user_record[\'password_hash\'], password_plain):\n                print("Login bem sucedido")\n                return user_record\n            else:\n                tentativas += 1\n                if tentativas < 3:\n                    print("Password errada... Tente Novamente")\n                    password_plain = getpass.getpass("Password: ")\n        \n        print("N\xfamero m\xe1ximo de tentativas excedido.")\n        return None\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Seguran\xe7a",type:"warning",children:(0,i.jsxs)(n.p,{children:["Usamos ",(0,i.jsx)(n.code,{children:"getpass.getpass()"})," para ",(0,i.jsx)(n.strong,{children:"n\xe3o mostrar a password no terminal"})," durante o input!"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-sistema-de-logging-com-m\xf3dulo-nativo",children:"\ufffd Sistema de Logging com M\xf3dulo Nativo"}),"\n",(0,i.jsx)(n.h3,{id:"por-que-logging",children:"Por Que Logging?"}),"\n",(0,i.jsxs)(n.p,{children:["Numa aplica\xe7\xe3o console ",(0,i.jsx)(n.strong,{children:"n\xe3o temos DevTools do browser"}),". O logging \xe9 crucial para:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Auditoria de a\xe7\xf5es de utilizadores"}),"\n",(0,i.jsx)(n.li,{children:"Debugging de erros em produ\xe7\xe3o"}),"\n",(0,i.jsx)(n.li,{children:"Conformidade com requisitos de seguran\xe7a"}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"configura\xe7\xe3o-centralizada",children:"Configura\xe7\xe3o Centralizada"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# logging_config.py\nimport logging\nimport datetime\nimport os\n\ndef setup_logging():\n    """Configura logging com rota\xe7\xe3o di\xe1ria."""\n    log_dir = "logs"\n    os.makedirs(log_dir, exist_ok=True)\n    \n    log_file = f"{log_dir}/nutriapp_{datetime.date.today()}.log"\n    \n    logging.basicConfig(\n        level=logging.INFO,\n        format=\'%(asctime)s - %(name)s - %(levelname)s - %(message)s\',\n        handlers=[\n            logging.FileHandler(log_file),\n        ]\n    )\n\ndef get_logger(name):\n    """Retorna logger configurado."""\n    return logging.getLogger(name)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"uso-no-c\xf3digo",children:"Uso no C\xf3digo"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# main.py\nimport logging_config\n\ndef main():\n    logging_config.setup_logging()\n    logger = logging_config.get_logger(__name__)\n    \n    logger.info("Sistema iniciado")\n    \n    # ... c\xf3digo ...\n    \n    if user_logado:\n        logger.info(f"Login sucesso. UserID: {user_id}, Username: {username}")\n    else:\n        logger.warning(f"Login falhado para username: {username}")\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Output em ",(0,i.jsx)(n.code,{children:"logs/nutriapp_2025-12-13.log"}),":"]})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"2025-12-13 10:23:45 - __main__ - INFO - Sistema iniciado\n2025-12-13 10:24:12 - __main__ - INFO - Login sucesso. UserID: 5, Username: andre\n2025-12-13 10:25:03 - __main__ - INFO - Menu User. UserID: 5. Detalhes: Registou refei\xe7\xe3o: Almo\xe7o\n"})}),"\n",(0,i.jsx)(n.admonition,{title:"Boa Pr\xe1tica",type:"info",children:(0,i.jsxs)(n.p,{children:["Logs ",(0,i.jsx)(n.strong,{children:"nunca"})," armazenam passwords! Apenas eventos e identificadores."]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-funcionalidades-avan\xe7adas",children:"\ufffd Funcionalidades Avan\xe7adas"}),"\n",(0,i.jsx)(n.h3,{id:"1-opera\xe7\xf5es-em-lote-admin",children:"1. Opera\xe7\xf5es em Lote (Admin)"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# admin.py\n@staticmethod\ndef inserir_em_lote():\n    """Insere m\xfaltiplos alimentos de uma vez."""\n    print("Formato: nome,calorias,proteinas,hidratos,gorduras,nome,...")\n    lote = input("Dados>>> ")\n    dados = [x.strip() for x in lote.split(",")]\n    \n    if len(dados) % 5 != 0:\n        print("Erro: formato inv\xe1lido")\n        return\n    \n    lote_dados = []\n    for i in range(0, len(dados), 5):\n        nome = dados[i]\n        calorias = int(dados[i+1])\n        proteinas = float(dados[i+2])\n        hidratos = float(dados[i+3])\n        gorduras = float(dados[i+4])\n        lote_dados.append((nome, calorias, proteinas, hidratos, gorduras))\n    \n    sql = """INSERT OR IGNORE INTO alimentos \n             (nome, calorias, proteinas, hidratos, gorduras)\n             VALUES (?, ?, ?, ?, ?)"""\n    \n    with get_db_connection() as conn:\n        cursor = conn.cursor()\n        cursor.executemany(sql, lote_dados)  # Batch insert!\n        conn.commit()\n'})}),"\n",(0,i.jsx)(n.admonition,{title:"Performance",type:"tip",children:(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"executemany()"})," \xe9 ",(0,i.jsx)(n.strong,{children:"10x mais r\xe1pido"})," que m\xfaltiplos ",(0,i.jsx)(n.code,{children:"execute()"})," individuais!"]})}),"\n",(0,i.jsx)(n.h3,{id:"2-agrupamento-de-refei\xe7\xf5es-por-data",children:"2. Agrupamento de Refei\xe7\xf5es por Data"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# main.py - L\xf3gica de agrupamento no controller\nregistos = crud_registos.get_registos_by_user(user_id_logado)\n\nrefeicoes_agrupadas = {}\nfor reg in registos:\n    data_limpa = reg['data_registo'].split('T')[0]  # 2025-12-13\n    chave = f\"{data_limpa} | {reg['tipo_refeicao']}\"  # \"2025-12-13 | Almo\xe7o\"\n    \n    if chave not in refeicoes_agrupadas:\n        refeicoes_agrupadas[chave] = []\n    refeicoes_agrupadas[chave].append(reg)\n\n# Output organizado por refei\xe7\xe3o\nfor refeicao_titulo, lista_items in refeicoes_agrupadas.items():\n    print(f\"\\nREFEI\xc7\xc3O: {refeicao_titulo}\")\n    subtotal_cal = 0\n    \n    for reg in lista_items:\n        print(f\"- {reg['alimento_nome']} ({reg['quantidade_gramas']}g) -> {reg['calorias_total']:.1f} kcal\")\n        subtotal_cal += reg['calorias_total']\n    \n    print(f\"Subtotal: {subtotal_cal:.1f} kcal\")\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-c\xe1lculo-autom\xe1tico-de-imc",children:"3. C\xe1lculo Autom\xe1tico de IMC"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'# user.py\n@property\ndef imc(self):\n    """Property din\xe2mica - calcula sempre que acedida."""\n    if self.peso_kg and self.altura_cm:\n        altura_m = self.altura_cm / 100\n        return round(self.peso_kg / (altura_m ** 2), 1)\n    return None\n\ndef categoria_imc(self):\n    """Retorna categoria baseada em guidelines WHO."""\n    if not self.imc:\n        return "Dados insuficientes"\n    if self.imc < 18.5:\n        return "Abaixo do Peso"\n    elif self.imc < 25:\n        return "Peso Normal"\n    elif self.imc < 30:\n        return "Sobrepeso"\n    else:\n        return "Obesidade"\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-li\xe7\xf5es-aprendidas",children:"\ud83d\udca1 Li\xe7\xf5es Aprendidas"}),"\n",(0,i.jsx)(n.h3,{id:"1-matchcase-\xe9-game-changer",children:"1. Match/Case \xe9 Game Changer"}),"\n",(0,i.jsxs)(n.p,{children:["Inicialmente us\xe1mos ",(0,i.jsx)(n.code,{children:"if/elif"})," cascatas. Refactorizar para ",(0,i.jsx)(n.code,{children:"match/case"})," melhorou a legibilidade drasticamente."]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# \u274c Antes: 100 linhas de if/elif\nif choice == '1':\n    # 20 linhas\nelif choice == '2':\n    # 15 linhas\n# ... ad nauseam\n\n# \u2705 Depois: Estrutura clara\nmatch choice:\n    case '1': registar_refeicao()\n    case '2': ver_diario()\n    # Cada fun\xe7\xe3o < 50 linhas\n"})}),"\n",(0,i.jsx)(n.h3,{id:"2-context-managers-previnem-leaks",children:"2. Context Managers Previnem Leaks"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:"# \u274c M\xe1 pr\xe1tica: Esquecer de fechar\nconn = sqlite3.connect(DB_PATH)\ncursor = conn.cursor()\ncursor.execute(sql)\n# Oops! Esqueci conn.close()\n\n# \u2705 Boa pr\xe1tica: Autom\xe1tico\nwith get_db_connection() as conn:\n    cursor = conn.cursor()\n    cursor.execute(sql)\n    # conn.close() chamado automaticamente!\n"})}),"\n",(0,i.jsx)(n.h3,{id:"3-docstrings-s\xe3o-documenta\xe7\xe3o-viva",children:"3. Docstrings S\xe3o Documenta\xe7\xe3o Viva"}),"\n",(0,i.jsxs)(n.p,{children:["Us\xe1mos ",(0,i.jsx)(n.strong,{children:"Sphinx"})," para gerar documenta\xe7\xe3o HTML autom\xe1tica:"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-python",children:'def create_user(username, password_plain, peso_kg=None, altura_cm=None):\n    """\n    Cria novo utilizador na base de dados.\n\n    :param username: Nome do utilizador\n    :type username: str\n    :param password_plain: Password em texto simples (ser\xe1 hasheada)\n    :type password_plain: str\n    :param peso_kg: Peso em quilogramas\n    :type peso_kg: float\n    :return: ID do utilizador criado ou None se j\xe1 existir\n    :rtype: int or None\n    """\n'})}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Resultado:"})," Documenta\xe7\xe3o completa em ",(0,i.jsx)(n.code,{children:"docs/_build/html/index.html"})]}),"\n",(0,i.jsx)(n.admonition,{title:"Produtividade",type:"tip",children:(0,i.jsxs)(n.p,{children:["Docstrings bem escritas pouparam-nos ",(0,i.jsx)(n.strong,{children:"horas"})," a explicar o c\xf3digo \xe0 equipa!"]})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-roadmap-de-console-para-web",children:"\ud83d\udd2e Roadmap: De Console para Web"}),"\n",(0,i.jsx)(n.h3,{id:"fase-1-api-rest-em-progresso",children:"Fase 1: API REST (Em Progresso)"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","FastAPI backend preservando l\xf3gica CRUD"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Endpoints: ",(0,i.jsx)(n.code,{children:"/api/auth"}),", ",(0,i.jsx)(n.code,{children:"/api/foods"}),", ",(0,i.jsx)(n.code,{children:"/api/meals"})]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Migra\xe7\xe3o SQLite \u2192 PostgreSQL"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Autentica\xe7\xe3o com JWT"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"fase-2-frontend-react",children:"Fase 2: Frontend React"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Interface web responsiva"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Dashboard com gr\xe1ficos de calorias"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Busca de alimentos em tempo real"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","PWA para uso offline"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"fase-3-features-avan\xe7adas",children:"Fase 3: Features Avan\xe7adas"}),"\n",(0,i.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","An\xe1lise nutricional com machine learning"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Integra\xe7\xe3o com APIs de alimentos (USDA, Open Food Facts)"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Exporta\xe7\xe3o de dados em PDF"]}),"\n",(0,i.jsxs)(n.li,{className:"task-list-item",children:[(0,i.jsx)(n.input,{type:"checkbox",disabled:!0})," ","App mobile com React Native"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-recursos-para-aprender",children:"\ud83c\udf93 Recursos para Aprender"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Tecnologia"}),(0,i.jsx)(n.th,{children:"Recurso Recomendado"}),(0,i.jsx)(n.th,{children:"N\xedvel"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Python 3.10+"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"https://docs.python.org/3/",children:"docs.python.org"})}),(0,i.jsx)(n.td,{children:"Todos"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"SQLite"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"https://www.sqlitetutorial.net/",children:"SQLite Tutorial"})}),(0,i.jsx)(n.td,{children:"Todos"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Arquitetura MVC"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"https://realpython.com/the-model-view-controller-mvc-paradigm-summarized-with-legos/",children:"Real Python - MVC"})}),(0,i.jsx)(n.td,{children:"Interm\xe9dio"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Sphinx Docs"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"https://www.sphinx-doc.org/",children:"Sphinx Documentation"})}),(0,i.jsx)(n.td,{children:"Interm\xe9dio"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Git Flow"}),(0,i.jsx)(n.td,{children:(0,i.jsx)(n.a,{href:"https://www.atlassian.com/git/tutorials/comparing-workflows/gitflow-workflow",children:"Atlassian Git Flow"})}),(0,i.jsx)(n.td,{children:"Todos"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-estat\xedsticas-do-projeto",children:"\ud83d\udcc8 Estat\xedsticas do Projeto"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"M\xe9trica"}),(0,i.jsx)(n.th,{children:"Valor"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Linhas de C\xf3digo"})}),(0,i.jsx)(n.td,{children:"~650 (main.py) + 500 (m\xf3dulos)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Ficheiros Python"})}),(0,i.jsx)(n.td,{children:"10 m\xf3dulos + 8 RST docs"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Commits Git"})}),(0,i.jsx)(n.td,{children:"137+ (m\xfaltiplos branches)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Tabelas BD"})}),(0,i.jsx)(n.td,{children:"3 (users, alimentos, registos)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Funcionalidades"})}),(0,i.jsx)(n.td,{children:"15+ (CRUD completo)"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.strong,{children:"Tempo de Desenvolvimento"})}),(0,i.jsx)(n.td,{children:"3 semanas (4 developers)"})]})]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"-conclus\xe3o",children:"\ud83e\udd1d Conclus\xe3o"}),"\n",(0,i.jsxs)(n.p,{children:["O NutriApp demonstra que ",(0,i.jsx)(n.strong,{children:"simplicidade t\xe9cnica"})," n\xe3o significa ",(0,i.jsx)(n.strong,{children:"funcionalidade limitada"}),". Com Python, SQLite e padr\xf5es de arquitetura s\xf3lidos, cri\xe1mos uma aplica\xe7\xe3o:"]}),"\n",(0,i.jsxs)(n.p,{children:["\u2705 ",(0,i.jsx)(n.strong,{children:"Robusta:"})," Transa\xe7\xf5es ACID, hashing de passwords, logging completo",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Escal\xe1vel:"})," Arquitetura MVC facilita migra\xe7\xe3o para web",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Manuten\xedvel:"})," C\xf3digo documentado com Sphinx, separa\xe7\xe3o clara de responsabilidades",(0,i.jsx)(n.br,{}),"\n","\u2705 ",(0,i.jsx)(n.strong,{children:"Educacional:"})," Perfeita para aprender fundamentos de engenharia de software"]}),"\n",(0,i.jsx)(n.h3,{id:"principais-takeaways",children:"Principais Takeaways"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsxs)(n.strong,{children:["Python 3.10+ ",(0,i.jsx)(n.code,{children:"match/case"})]})," torna controllers muito mais leg\xedveis"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SQLite"})," \xe9 surpreendentemente poderoso para apps pequenas/m\xe9dias"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Arquitetura MVC"})," funciona perfeitamente em aplica\xe7\xf5es console"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Logging"})," \xe9 essencial quando n\xe3o h\xe1 UI visual"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Docstrings"})," s\xe3o investimento que se paga rapidamente"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"reposit\xf3rio-do-c\xf3digo",children:"Reposit\xf3rio do C\xf3digo"}),"\n",(0,i.jsxs)(n.p,{children:["\ud83d\udd17 ",(0,i.jsx)(n.strong,{children:"GitHub:"})," ",(0,i.jsx)(n.a,{href:"https://github.com/DevPool1/ADC_TP_NUTRICAO",children:"DevPool1/ADC_TP_NUTRICAO"})]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Clone e executa\ngit clone https://github.com/DevPool1/ADC_TP_NUTRICAO\ncd ADC_TP_NUTRICAO\npython src/main.py\n\n# Credenciais padr\xe3o\n# Username: admin1\n# Password: 123\n"})}),"\n",(0,i.jsxs)(n.p,{children:["Tens d\xfavidas sobre alguma escolha t\xe9cnica? ",(0,i.jsxs)(n.strong,{children:["Abre uma ",(0,i.jsx)(n.a,{href:"https://github.com/DevPool1/ADC_TP_NUTRICAO/issues",children:"Issue"})," ou ",(0,i.jsx)(n.a,{href:"https://github.com/DevPool1/TP-ADC-SITE/discussions",children:"Discussion"}),"!"]})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.img,{src:"https://img.shields.io/badge/Python-3.10+-3776ab?style=for-the-badge&logo=python",alt:""}),"\n",(0,i.jsx)(n.img,{src:"https://img.shields.io/badge/Database-SQLite-003b57?style=for-the-badge&logo=sqlite",alt:""}),"\n",(0,i.jsx)(n.img,{src:"https://img.shields.io/badge/Architecture-MVC-ffd343?style=for-the-badge",alt:""}),"\n",(0,i.jsx)(n.img,{src:"https://img.shields.io/badge/Docs-Sphinx-000000?style=for-the-badge&logo=sphinx",alt:""})]})]})}function u(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>t});var a=s(6540);const i={},o=a.createContext(i);function r(e){const n=a.useContext(o);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),a.createElement(o.Provider,{value:n},e.children)}}}]);